package cl.scripts.extraeria;

import java.util.HashMap;
import java.util.Map;


public class prueba {
	
	/**
	 * Constante parametro carácter ascii 25.
	 */
	public static final String EXT_CHAR_25 = Character.toString((char) 25);

	/**
	 * Tabla de Identificadores de Aplicación.
	 * Key: IA
	 * Value: formula
	 */
	public static final Map<String, String> IANs = new HashMap<String, String>() {
		private static final long serialVersionUID = 1L;
	{
		put("00", "n2+n18");
		put("01", "n2+n14");
		put("02", "n2+n14");
		put("10", "n2+an..20");
		put("11", "n2+n6");
		put("12", "n2+n6");
		put("13", "n2+n6");
		put("15", "n2+n6");
		put("17", "n2+n6");
		put("20", "n2+n2");
		put("21", "n2+an..20");
		put("22", "n2+an..29");

		put("240", "n3+an..30");
		put("241", "n3+an..30");
		put("250", "n3+an..30");
		put("251", "n3+an..30");

		put("30", "n2+n..8");

		put("3100", "n4+n6");
		put("3101", "n4+n6");
		put("3102", "n4+n6");
		put("3103", "n4+n6");
		put("3104", "n4+n6");
		put("3105", "n4+n6");
		put("3106", "n4+n6");
		put("3107", "n4+n6");
		put("3108", "n4+n6");
		put("3109", "n4+n6");
		put("3110", "n4+n6");
		put("3111", "n4+n6");
		put("3112", "n4+n6");
		put("3113", "n4+n6");
		put("3114", "n4+n6");
		put("3115", "n4+n6");
		put("3116", "n4+n6");
		put("3117", "n4+n6");
		put("3118", "n4+n6");
		put("3119", "n4+n6");
		put("3120", "n4+n6");
		put("3121", "n4+n6");
		put("3122", "n4+n6");
		put("3123", "n4+n6");
		put("3124", "n4+n6");
		put("3125", "n4+n6");
		put("3126", "n4+n6");
		put("3127", "n4+n6");
		put("3128", "n4+n6");
		put("3129", "n4+n6");
		put("3130", "n4+n6");
		put("3131", "n4+n6");
		put("3132", "n4+n6");
		put("3133", "n4+n6");
		put("3134", "n4+n6");
		put("3135", "n4+n6");
		put("3136", "n4+n6");
		put("3137", "n4+n6");
		put("3138", "n4+n6");
		put("3139", "n4+n6");
		put("3140", "n4+n6");
		put("3141", "n4+n6");
		put("3142", "n4+n6");
		put("3143", "n4+n6");
		put("3144", "n4+n6");
		put("3145", "n4+n6");
		put("3146", "n4+n6");
		put("3147", "n4+n6");
		put("3148", "n4+n6");
		put("3149", "n4+n6");
		put("3150", "n4+n6");
		put("3151", "n4+n6");
		put("3152", "n4+n6");
		put("3153", "n4+n6");
		put("3154", "n4+n6");
		put("3155", "n4+n6");
		put("3156", "n4+n6");
		put("3157", "n4+n6");
		put("3158", "n4+n6");
		put("3159", "n4+n6");
		put("3160", "n4+n6");
		put("3161", "n4+n6");
		put("3162", "n4+n6");
		put("3163", "n4+n6");
		put("3164", "n4+n6");
		put("3165", "n4+n6");
		put("3166", "n4+n6");
		put("3167", "n4+n6");
		put("3168", "n4+n6");
		put("3169", "n4+n6");
		put("3200", "n4+n6");
		put("3201", "n4+n6");
		put("3202", "n4+n6");
		put("3203", "n4+n6");
		put("3204", "n4+n6");
		put("3205", "n4+n6");
		put("3206", "n4+n6");
		put("3207", "n4+n6");
		put("3208", "n4+n6");
		put("3209", "n4+n6");
		put("3210", "n4+n6");
		put("3211", "n4+n6");
		put("3212", "n4+n6");
		put("3213", "n4+n6");
		put("3214", "n4+n6");
		put("3215", "n4+n6");
		put("3216", "n4+n6");
		put("3217", "n4+n6");
		put("3218", "n4+n6");
		put("3219", "n4+n6");
		put("3220", "n4+n6");
		put("3221", "n4+n6");
		put("3222", "n4+n6");
		put("3223", "n4+n6");
		put("3224", "n4+n6");
		put("3225", "n4+n6");
		put("3226", "n4+n6");
		put("3227", "n4+n6");
		put("3228", "n4+n6");
		put("3229", "n4+n6");
		put("3230", "n4+n6");
		put("3231", "n4+n6");
		put("3232", "n4+n6");
		put("3233", "n4+n6");
		put("3234", "n4+n6");
		put("3235", "n4+n6");
		put("3236", "n4+n6");
		put("3237", "n4+n6");
		put("3238", "n4+n6");
		put("3239", "n4+n6");
		put("3240", "n4+n6");
		put("3241", "n4+n6");
		put("3242", "n4+n6");
		put("3243", "n4+n6");
		put("3244", "n4+n6");
		put("3245", "n4+n6");
		put("3246", "n4+n6");
		put("3247", "n4+n6");
		put("3248", "n4+n6");
		put("3249", "n4+n6");
		put("3250", "n4+n6");
		put("3251", "n4+n6");
		put("3252", "n4+n6");
		put("3253", "n4+n6");
		put("3254", "n4+n6");
		put("3255", "n4+n6");
		put("3256", "n4+n6");
		put("3257", "n4+n6");
		put("3258", "n4+n6");
		put("3259", "n4+n6");
		put("3260", "n4+n6");
		put("3261", "n4+n6");
		put("3262", "n4+n6");
		put("3263", "n4+n6");
		put("3264", "n4+n6");
		put("3265", "n4+n6");
		put("3266", "n4+n6");
		put("3267", "n4+n6");
		put("3268", "n4+n6");
		put("3269", "n4+n6");
		put("3270", "n4+n6");
		put("3271", "n4+n6");
		put("3272", "n4+n6");
		put("3273", "n4+n6");
		put("3274", "n4+n6");
		put("3275", "n4+n6");
		put("3276", "n4+n6");
		put("3277", "n4+n6");
		put("3278", "n4+n6");
		put("3279", "n4+n6");
		put("3280", "n4+n6");
		put("3281", "n4+n6");
		put("3282", "n4+n6");
		put("3283", "n4+n6");
		put("3284", "n4+n6");
		put("3285", "n4+n6");
		put("3286", "n4+n6");
		put("3287", "n4+n6");
		put("3288", "n4+n6");
		put("3289", "n4+n6");
		put("3290", "n4+n6");
		put("3291", "n4+n6");
		put("3292", "n4+n6");
		put("3293", "n4+n6");
		put("3294", "n4+n6");
		put("3295", "n4+n6");
		put("3296", "n4+n6");
		put("3297", "n4+n6");
		put("3298", "n4+n6");
		put("3299", "n4+n6");
		put("3500", "n4+n6");
		put("3501", "n4+n6");
		put("3502", "n4+n6");
		put("3503", "n4+n6");
		put("3504", "n4+n6");
		put("3505", "n4+n6");
		put("3506", "n4+n6");
		put("3507", "n4+n6");
		put("3508", "n4+n6");
		put("3509", "n4+n6");
		put("3510", "n4+n6");
		put("3511", "n4+n6");
		put("3512", "n4+n6");
		put("3513", "n4+n6");
		put("3514", "n4+n6");
		put("3515", "n4+n6");
		put("3516", "n4+n6");
		put("3517", "n4+n6");
		put("3518", "n4+n6");
		put("3519", "n4+n6");
		put("3520", "n4+n6");
		put("3521", "n4+n6");
		put("3522", "n4+n6");
		put("3523", "n4+n6");
		put("3524", "n4+n6");
		put("3525", "n4+n6");
		put("3526", "n4+n6");
		put("3527", "n4+n6");
		put("3528", "n4+n6");
		put("3529", "n4+n6");
		put("3560", "n4+n6");
		put("3561", "n4+n6");
		put("3562", "n4+n6");
		put("3563", "n4+n6");
		put("3564", "n4+n6");
		put("3565", "n4+n6");
		put("3566", "n4+n6");
		put("3567", "n4+n6");
		put("3568", "n4+n6");
		put("3569", "n4+n6");
		put("3570", "n4+n6");
		put("3571", "n4+n6");
		put("3572", "n4+n6");
		put("3573", "n4+n6");
		put("3574", "n4+n6");
		put("3575", "n4+n6");
		put("3576", "n4+n6");
		put("3577", "n4+n6");
		put("3578", "n4+n6");
		put("3579", "n4+n6");
		put("3600", "n4+n6");
		put("3601", "n4+n6");
		put("3602", "n4+n6");
		put("3603", "n4+n6");
		put("3604", "n4+n6");
		put("3605", "n4+n6");
		put("3606", "n4+n6");
		put("3607", "n4+n6");
		put("3608", "n4+n6");
		put("3609", "n4+n6");
		put("3610", "n4+n6");
		put("3611", "n4+n6");
		put("3612", "n4+n6");
		put("3613", "n4+n6");
		put("3614", "n4+n6");
		put("3615", "n4+n6");
		put("3616", "n4+n6");
		put("3617", "n4+n6");
		put("3618", "n4+n6");
		put("3619", "n4+n6");
		put("3640", "n4+n6");
		put("3641", "n4+n6");
		put("3642", "n4+n6");
		put("3643", "n4+n6");
		put("3644", "n4+n6");
		put("3645", "n4+n6");
		put("3646", "n4+n6");
		put("3647", "n4+n6");
		put("3648", "n4+n6");
		put("3649", "n4+n6");
		put("3650", "n4+n6");
		put("3651", "n4+n6");
		put("3652", "n4+n6");
		put("3653", "n4+n6");
		put("3654", "n4+n6");
		put("3655", "n4+n6");
		put("3656", "n4+n6");
		put("3657", "n4+n6");
		put("3658", "n4+n6");
		put("3659", "n4+n6");
		put("3660", "n4+n6");
		put("3661", "n4+n6");
		put("3662", "n4+n6");
		put("3663", "n4+n6");
		put("3664", "n4+n6");
		put("3665", "n4+n6");
		put("3666", "n4+n6");
		put("3667", "n4+n6");
		put("3668", "n4+n6");
		put("3669", "n4+n6");
		put("3300", "n4+n6");
		put("3301", "n4+n6");
		put("3302", "n4+n6");
		put("3303", "n4+n6");
		put("3304", "n4+n6");
		put("3305", "n4+n6");
		put("3306", "n4+n6");
		put("3307", "n4+n6");
		put("3308", "n4+n6");
		put("3309", "n4+n6");
		put("3310", "n4+n6");
		put("3311", "n4+n6");
		put("3312", "n4+n6");
		put("3313", "n4+n6");
		put("3314", "n4+n6");
		put("3315", "n4+n6");
		put("3316", "n4+n6");
		put("3317", "n4+n6");
		put("3318", "n4+n6");
		put("3319", "n4+n6");
		put("3320", "n4+n6");
		put("3321", "n4+n6");
		put("3322", "n4+n6");
		put("3323", "n4+n6");
		put("3324", "n4+n6");
		put("3325", "n4+n6");
		put("3326", "n4+n6");
		put("3327", "n4+n6");
		put("3328", "n4+n6");
		put("3329", "n4+n6");
		put("3330", "n4+n6");
		put("3331", "n4+n6");
		put("3332", "n4+n6");
		put("3333", "n4+n6");
		put("3334", "n4+n6");
		put("3335", "n4+n6");
		put("3336", "n4+n6");
		put("3337", "n4+n6");
		put("3338", "n4+n6");
		put("3339", "n4+n6");
		put("3340", "n4+n6");
		put("3341", "n4+n6");
		put("3342", "n4+n6");
		put("3343", "n4+n6");
		put("3344", "n4+n6");
		put("3345", "n4+n6");
		put("3346", "n4+n6");
		put("3347", "n4+n6");
		put("3348", "n4+n6");
		put("3349", "n4+n6");
		put("3350", "n4+n6");
		put("3351", "n4+n6");
		put("3352", "n4+n6");
		put("3353", "n4+n6");
		put("3354", "n4+n6");
		put("3355", "n4+n6");
		put("3356", "n4+n6");
		put("3357", "n4+n6");
		put("3358", "n4+n6");
		put("3359", "n4+n6");
		put("3360", "n4+n6");
		put("3361", "n4+n6");
		put("3362", "n4+n6");
		put("3363", "n4+n6");
		put("3364", "n4+n6");
		put("3365", "n4+n6");
		put("3366", "n4+n6");
		put("3367", "n4+n6");
		put("3368", "n4+n6");
		put("3369", "n4+n6");
		put("3370", "n4+n6");
		put("3371", "n4+n6");
		put("3372", "n4+n6");
		put("3373", "n4+n6");
		put("3374", "n4+n6");
		put("3375", "n4+n6");
		put("3376", "n4+n6");
		put("3377", "n4+n6");
		put("3378", "n4+n6");
		put("3379", "n4+n6");
		put("3400", "n4+n6");
		put("3401", "n4+n6");
		put("3402", "n4+n6");
		put("3403", "n4+n6");
		put("3404", "n4+n6");
		put("3405", "n4+n6");
		put("3406", "n4+n6");
		put("3407", "n4+n6");
		put("3408", "n4+n6");
		put("3409", "n4+n6");
		put("3410", "n4+n6");
		put("3411", "n4+n6");
		put("3412", "n4+n6");
		put("3413", "n4+n6");
		put("3414", "n4+n6");
		put("3415", "n4+n6");
		put("3416", "n4+n6");
		put("3417", "n4+n6");
		put("3418", "n4+n6");
		put("3419", "n4+n6");
		put("3420", "n4+n6");
		put("3421", "n4+n6");
		put("3422", "n4+n6");
		put("3423", "n4+n6");
		put("3424", "n4+n6");
		put("3425", "n4+n6");
		put("3426", "n4+n6");
		put("3427", "n4+n6");
		put("3428", "n4+n6");
		put("3429", "n4+n6");
		put("3430", "n4+n6");
		put("3431", "n4+n6");
		put("3432", "n4+n6");
		put("3433", "n4+n6");
		put("3434", "n4+n6");
		put("3435", "n4+n6");
		put("3436", "n4+n6");
		put("3437", "n4+n6");
		put("3438", "n4+n6");
		put("3439", "n4+n6");
		put("3440", "n4+n6");
		put("3441", "n4+n6");
		put("3442", "n4+n6");
		put("3443", "n4+n6");
		put("3444", "n4+n6");
		put("3445", "n4+n6");
		put("3446", "n4+n6");
		put("3447", "n4+n6");
		put("3448", "n4+n6");
		put("3449", "n4+n6");
		put("3450", "n4+n6");
		put("3451", "n4+n6");
		put("3452", "n4+n6");
		put("3453", "n4+n6");
		put("3454", "n4+n6");
		put("3455", "n4+n6");
		put("3456", "n4+n6");
		put("3457", "n4+n6");
		put("3458", "n4+n6");
		put("3459", "n4+n6");
		put("3460", "n4+n6");
		put("3461", "n4+n6");
		put("3462", "n4+n6");
		put("3463", "n4+n6");
		put("3464", "n4+n6");
		put("3465", "n4+n6");
		put("3466", "n4+n6");
		put("3467", "n4+n6");
		put("3468", "n4+n6");
		put("3469", "n4+n6");
		put("3470", "n4+n6");
		put("3471", "n4+n6");
		put("3472", "n4+n6");
		put("3473", "n4+n6");
		put("3474", "n4+n6");
		put("3475", "n4+n6");
		put("3476", "n4+n6");
		put("3477", "n4+n6");
		put("3478", "n4+n6");
		put("3479", "n4+n6");
		put("3480", "n4+n6");
		put("3481", "n4+n6");
		put("3482", "n4+n6");
		put("3483", "n4+n6");
		put("3484", "n4+n6");
		put("3485", "n4+n6");
		put("3486", "n4+n6");
		put("3487", "n4+n6");
		put("3488", "n4+n6");
		put("3489", "n4+n6");
		put("3490", "n4+n6");
		put("3491", "n4+n6");
		put("3492", "n4+n6");
		put("3493", "n4+n6");
		put("3494", "n4+n6");
		put("3495", "n4+n6");
		put("3496", "n4+n6");
		put("3497", "n4+n6");
		put("3498", "n4+n6");
		put("3499", "n4+n6");
		put("3530", "n4+n6");
		put("3531", "n4+n6");
		put("3532", "n4+n6");
		put("3533", "n4+n6");
		put("3534", "n4+n6");
		put("3535", "n4+n6");
		put("3536", "n4+n6");
		put("3537", "n4+n6");
		put("3538", "n4+n6");
		put("3539", "n4+n6");
		put("3540", "n4+n6");
		put("3541", "n4+n6");
		put("3542", "n4+n6");
		put("3543", "n4+n6");
		put("3544", "n4+n6");
		put("3545", "n4+n6");
		put("3546", "n4+n6");
		put("3547", "n4+n6");
		put("3548", "n4+n6");
		put("3549", "n4+n6");
		put("3550", "n4+n6");
		put("3551", "n4+n6");
		put("3552", "n4+n6");
		put("3553", "n4+n6");
		put("3554", "n4+n6");
		put("3555", "n4+n6");
		put("3556", "n4+n6");
		put("3557", "n4+n6");
		put("3558", "n4+n6");
		put("3559", "n4+n6");
		put("3620", "n4+n6");
		put("3621", "n4+n6");
		put("3622", "n4+n6");
		put("3623", "n4+n6");
		put("3624", "n4+n6");
		put("3625", "n4+n6");
		put("3626", "n4+n6");
		put("3627", "n4+n6");
		put("3628", "n4+n6");
		put("3629", "n4+n6");
		put("3630", "n4+n6");
		put("3631", "n4+n6");
		put("3632", "n4+n6");
		put("3633", "n4+n6");
		put("3634", "n4+n6");
		put("3635", "n4+n6");
		put("3636", "n4+n6");
		put("3637", "n4+n6");
		put("3638", "n4+n6");
		put("3639", "n4+n6");
		put("3670", "n4+n6");
		put("3671", "n4+n6");
		put("3672", "n4+n6");
		put("3673", "n4+n6");
		put("3674", "n4+n6");
		put("3675", "n4+n6");
		put("3676", "n4+n6");
		put("3677", "n4+n6");
		put("3678", "n4+n6");
		put("3679", "n4+n6");
		put("3680", "n4+n6");
		put("3681", "n4+n6");
		put("3682", "n4+n6");
		put("3683", "n4+n6");
		put("3684", "n4+n6");
		put("3685", "n4+n6");
		put("3686", "n4+n6");
		put("3687", "n4+n6");
		put("3688", "n4+n6");
		put("3689", "n4+n6");
		put("3690", "n4+n6");
		put("3691", "n4+n6");
		put("3692", "n4+n6");
		put("3693", "n4+n6");
		put("3694", "n4+n6");
		put("3695", "n4+n6");
		put("3696", "n4+n6");
		put("3697", "n4+n6");
		put("3698", "n4+n6");
		put("3699", "n4+n6");

		put("37", "n2+n..8");

		put("3900", "n4+n..15");
		put("3901", "n4+n..15");
		put("3902", "n4+n..15");
		put("3903", "n4+n..15");
		put("3904", "n4+n..15");
		put("3905", "n4+n..15");
		put("3906", "n4+n..15");
		put("3907", "n4+n..15");
		put("3908", "n4+n..15");
		put("3909", "n4+n..15");

		put("3910", "n4+n3+n..15");
		put("3911", "n4+n3+n..15");
		put("3912", "n4+n3+n..15");
		put("3913", "n4+n3+n..15");
		put("3914", "n4+n3+n..15");
		put("3915", "n4+n3+n..15");
		put("3916", "n4+n3+n..15");
		put("3917", "n4+n3+n..15");
		put("3918", "n4+n3+n..15");
		put("3919", "n4+n3+n..15");

		put("3920", "n4+n..15");
		put("3921", "n4+n..15");
		put("3922", "n4+n..15");
		put("3923", "n4+n..15");
		put("3924", "n4+n..15");
		put("3925", "n4+n..15");
		put("3926", "n4+n..15");
		put("3927", "n4+n..15");
		put("3928", "n4+n..15");
		put("3929", "n4+n..15");

		put("3930", "n4+n3+n..15");
		put("3931", "n4+n3+n..15");
		put("3932", "n4+n3+n..15");
		put("3933", "n4+n3+n..15");
		put("3934", "n4+n3+n..15");
		put("3935", "n4+n3+n..15");
		put("3936", "n4+n3+n..15");
		put("3937", "n4+n3+n..15");
		put("3938", "n4+n3+n..15");
		put("3939", "n4+n3+n..15");


		put("400", "n3+an..30");
		put("401", "n3+an..30");
		put("402", "n3+n17");
		put("403", "n3+an..30");
		put("410", "n3+n13");
		put("411", "n3+n13");
		put("412", "n3+n13");
		put("413", "n3+n13");
		put("414", "n3+n13");
		put("415", "n3+n13");
		put("420", "n3+n..20");
		put("421", "n3+n3+an..9");
		put("422", "n3+n3");
		put("423", "n3+n3+n..12");
		put("424", "n3+n3");
		put("425", "n3+n3");
		put("426", "n3+n3");

		put("7001", "n4+n13");
		put("7002", "n4+an..30");
		put("7030", "n4+n3+an..27");

		put("7031", "n4+n3+an..27");
		put("7032", "n4+n3+an..27");
		put("7033", "n4+n3+an..27");
		put("7034", "n4+n3+an..27");
		put("7035", "n4+n3+an..27");
		put("7036", "n4+n3+an..27");
		put("7037", "n4+n3+an..27");
		put("7038", "n4+n3+an..27");
		put("7039", "n4+n3+an..27");

		put("8001", "n4+n14");
		put("8002", "n4+an..20");
		put("8003", "n4+n14+an..16");
		put("8004", "n4+an..30");
		put("8005", "n4+n6");
		put("8006", "n4+n14+n2+n2");
		put("8007", "n4+an..30");
		put("8008", "n4+n8+n..4");
		put("8018", "n4+n18");
		put("8020", "n4+an..25");
		put("8100", "n4+n1+n5");
		put("8101", "n4+n1+n5+n4");
		put("8102", "n4+n1+n1");

		put("90", "n2+an..30");
		put("91", "n2+an..30");
		put("92", "n2+an..30");
		put("93", "n2+an..30");
		put("94", "n2+an..30");
		put("95", "n2+an..30");
		put("96", "n2+an..30");
		put("97", "n2+an..30");
		put("98", "n2+an..30");
		put("99", "n2+an..30");
	}};

	public static void main(String[] args) {
		
		final java.util.List<String> algo = new java.util.ArrayList<String>(){{
			add("310");
			add("311");
			add("312");
			add("313");
			add("314");
			add("315");
			add("316");
			add("320");
			add("321");
			add("322");
			add("323");
			add("324");
			add("325");
			add("326");
			add("327");
			add("328");
			add("329");
			add("350");
			add("351");
			add("352");
			add("356");
			add("357");
			add("360");
			add("361");
			add("364");
			add("365");
			add("366");
			add("330");
			add("331");
			add("332");
			add("333");
			add("334");
			add("335");
			add("336");
			add("337");
			add("340");
			add("341");
			add("342");
			add("343");
			add("344");
			add("345");
			add("346");
			add("347");
			add("348");
			add("349");
			add("353");
			add("354");
			add("355");
			add("362");
			add("363");
			add("367");
			add("368");
			add("369");
		}};
		
		for (final String x : algo) {
			for (int xx = 0; xx < 10; xx++) {
				System.out.println("put(\"" + x + "" + xx + "\", \"n4+n6\");");
				
			}
		}
		
		
		
		// get codigoGS1-128
//		String codigo = "0012345390n1234#0100391n00";
		
		String codigo = "0108456789567807150804231089B23" + EXT_CHAR_25 + "7035001ANGOLA" + EXT_CHAR_25;
		
//		String codigo = "7035001ANGOLA" + EXT_CHAR_25;
		
		
		// flag
		boolean continuar = false;
		// aqui deberia iterar de alguna forma
		do {
			// reinicio flag
			continuar = false;			
			// buscar si es un IA de 2
			if (codigo.length() > 1 && existeIA(codigo.substring(0, 2))) {
				// IdentificadorDeAplicacionV1
//				final IdentificadorDeAplicacionV1 ident = obj.createIdentificadorDeAplicacionV1();
				// creo un elemento
//				listaIdnt.getIdentificadorDeAplicacions().add(ident);
				// obtengo el IA
				final String IA = codigo.substring(0, 2);
				
				System.out.println("IA: " + IA);
//				ident.setNombre(IA);
				// obtengo la formula
				final String formula = IANs.get(IA);
				// aplico formula
				String codRestante = aplicarFormula(formula, codigo.substring(2));
				
				// si quedan mas caracteres y es el finIa
				if (codRestante.length() > 0 && codRestante.substring(0, 1).equals(EXT_CHAR_25)) {
					// lo quito
					codRestante = codRestante.substring(1);
				}
				// si no queda mas nada, terminar
				if (codRestante.length() == 0) {
					break;
				} else {
					// si queda mas texto, continuo
					codigo = codRestante;
					continuar = true;
				}
				// set
//				ident.setValor(valor);
				
			} else if (codigo.length() > 2 && existeIA(codigo.substring(0, 3))) {
				// buscar si es un IA de 3
				
				// obtengo el IA
				final String IA = codigo.substring(0, 3);
				
				System.out.println("IA: " + IA);
//				ident.setNombre(IA);
				// obtengo la formula
				final String formula = IANs.get(IA);
				// aplico formula
				String codRestante = aplicarFormula(formula, codigo.substring(3));
				
				// si quedan mas caracteres y es el finIa
				if (codRestante.length() > 0 && codRestante.substring(0, 1).equals(EXT_CHAR_25)) {
					// lo quito
					codRestante = codRestante.substring(1);
				}
				// si no queda mas nada, terminar
				if (codRestante.length() == 0) {
					break;
				} else {
					// si queda mas texto, continuo
					codigo = codRestante;
					continuar = true;
				}
				
			} else if (codigo.length() > 3 && existeIA(codigo.substring(0, 4))) {
				// buscar si es un IA de 4
				// obtengo el IA
				final String IA = codigo.substring(0, 4);
				
				System.out.println("IA: " + IA);
				
//				ident.setNombre(IA);
				// obtengo la formula
				final String formula = IANs.get(IA);
				// aplico formula
				String codRestante = aplicarFormula(formula, codigo.substring(4));
				
				// si quedan mas caracteres y es el finIa
				if (codRestante.length() > 0 && codRestante.substring(0, 1).equals(EXT_CHAR_25)) {
					// lo quito
					codRestante = codRestante.substring(1);
				}
				// si no queda mas nada, terminar
				if (codRestante.length() == 0) {
					break;
				} else {
					// si queda mas texto, continuo
					codigo = codRestante;
					continuar = true;
				}
				
				
			} else {
				// si no coincide error ErrorFormatoIncorrecto
				// throw new ErrorFormatoIncorrectoException(null);
				System.out.println("ErrorFormatoIncorrectoException");
			}

		} while (continuar);
		// fin iteracion
	}
	
	
	
	private static String aplicarFormula(final String formula, String codigo) {
		// spli por el simbolo + 
		final String[] campos = formula.split("\\+");
		
//		System.out.println(" codigo a procesar: " + codigo);
		
//		System.out.println("[0] - " + campos[0]);
//		System.out.println("[1] - " + campos[1]);
		
		String valor = "";
		
		for (int xx = 1; campos.length > xx; xx++) {
			
			int cont = 0;
			// si es longitud fija 
			if (!campos[xx].contains("..")) {
				// obtengo cuantos digitos recortar
				
				Integer cant = Integer.parseInt(campos[xx].replace("n", "").replace("a", ""));

				// si la longit es menor, error
				if (codigo.length() < cant) {
					// error
					System.out.println("error");
				}
				// guardo 
				valor += codigo.substring(cont, cant);
				// me muevo
				codigo = codigo.substring(cant);
				
			} else {
				// longitud variable
				Integer cantMax = Integer.parseInt(campos[xx].replace("n", "").replace("a", "")
						.replace("..", ""));
				
				// lo mismo pero debo cortar si encontre el caracter de fin, o si llegue a la longitud maxima,
				Integer cant = 0;
				
				// por cada char
				for (final char letra : codigo.toCharArray()) {
					// set a string
					String letr = String.valueOf(letra);
					// si encuentro el fin de recorrido
					if (EXT_CHAR_25.equals(letr)) {
						
						break;
					}
					// si llego a la long maxima
					if (cant == cantMax) {
						
						break;
					}
					// me muevo un caracter
					cant++;
				}
				valor += codigo.substring(cont, cant);
				// me muevo
				codigo = codigo.substring(cant);
				
				// si hay un numero inferior y no capture el finIA
				if (cant < cantMax && (codigo.length() < 1 || !EXT_CHAR_25.equals(codigo.substring(0, 1)))) {
					// error
					System.out.println("error");
				}
			}
		}
		// guardo el valor obtenido
		System.out.println("valor: " + valor);
		// canitdad a quitar
//		System.out.println("restante: " + codigo);
		
		// retorno el restante de la cadena
		return codigo;
	}
	
	/** Busco si existe el IA.
	 * @param IA IA
	 * @return true/false
	 */
	private static boolean existeIA(final String IA) {
		// busco si existe
		return IANs.containsKey(IA);
	}

}
